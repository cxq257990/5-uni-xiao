{"version":3,"sources":["uni-app:///main.js","webpack:////Users/xueqingchen/Documents/5-uni/5-uni-xiao/5-uni-xiao/pages/API/get-location/get-location.vue?63e0","webpack:////Users/xueqingchen/Documents/5-uni/5-uni-xiao/5-uni-xiao/pages/API/get-location/get-location.vue?0ebc","webpack:////Users/xueqingchen/Documents/5-uni/5-uni-xiao/5-uni-xiao/pages/API/get-location/get-location.vue?81cd","webpack:////Users/xueqingchen/Documents/5-uni/5-uni-xiao/5-uni-xiao/pages/API/get-location/get-location.vue?475e","uni-app:///pages/API/get-location/get-location.vue","webpack:////Users/xueqingchen/Documents/5-uni/5-uni-xiao/5-uni-xiao/pages/API/get-location/get-location.vue?f3f1"],"names":["createPage","Page","renderjs","component","options","__file","components","pageHead","uniPopup","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","status"],"mappings":";;;;wEAAA,qBACA,sBACA,4D,mDACAA,EAAWC,a;;;;2DCHX,6RACIC,EADJ,uNASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,0CACZ,aAAAF,E;;;;2GCvBf,65C;;;;2GCAA,IAAIG,EAAJ,0LACA,IACEA,EAAa,CACXC,SAAU,WACR,OAAO,0JAITC,SAAU,WACR,OAAO,+LAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DCtCvB,2+BAAo7B,eAAG,G;;;;wzBCkCv7B,uCACA,mB,EAKA,CACE,WAAF,CACI,SAAJ,GAEE,KAJF,WAKI,MAAJ,CACM,MAAN,cACM,aAAN,EACM,SAAN,GACM,KAAN,KAGE,QAAF,CACI,YADJ,SACA,GACM,KAAN,QAEI,YAJJ,WAKM,KAAN,kBAEI,YAPJ,WAQM,KAAN,SAEI,YAVJ,WAUA,+IAQA,eARA,UAQA,EARA,OASA,IAAgB,EAThB,uBAUgB,EAAhB,cAVA,0BAegB,EAAhB,gBAfA,8CAiBI,cA3BJ,WA2BA,WACM,EAAN,aACQ,QAAR,YACU,EAAV,eACU,EAAV,oCAEQ,KAAR,YAOA,iCACY,EAAZ,WACc,MAAd,YAGY,EAAZ,WACc,MAAd,eAOI,WAAJ,WACM,OAAN,2BACQ,EAAR,YACU,QAAV,iBACA,wCAIA,oCACc,EAAd,GAEc,EAAd,GANc,EAAd,UAYI,YAAJ,sBACM,KAAN,cACM,EAAN,aACQ,QAAR,YACA,oDACY,EAAZ,iBAGQ,KAAR,iBAGI,gBAjFJ,WAiFA,wHACgB,UAAhB,MADA,gCACA,iCADA,yDAEkB,UAAlB,0DAFA,iCACA,EADA,KAI+B,OAAXC,GAA8B,IAAXA,EACrB,EAAlB,EACA,MACkB,EAAlB,WACoB,QAApB,UACoB,YAApB,KACoB,YAApB,EACoB,QAApB,gBAGA,OACkB,EAAlB,WACoB,QAApB,YAGkB,EAAlB,WACoB,QAApB,SACoB,YAApB,KACoB,QAApB,YACA,WACwB,UAAxB,oBAxBA,kBA8BgB,GA9BhB,+CAgCI,MAAJ,WACM,KAAN,kB;;;;2DCtKA,43CAAq0C,eAAG,G","file":"pages/API/get-location/get-location.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/API/get-location/get-location.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./get-location.vue?vue&type=template&id=2ac62a9e&\"\nvar renderjs\nimport script from \"./get-location.vue?vue&type=script&lang=js&\"\nexport * from \"./get-location.vue?vue&type=script&lang=js&\"\nimport style0 from \"./get-location.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/API/get-location/get-location.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./get-location.vue?vue&type=template&id=2ac62a9e&\"","var components\ntry {\n  components = {\n    pageHead: function() {\n      return import(\n        /* webpackChunkName: \"components/page-head/page-head\" */ \"@/components/page-head/page-head.vue\"\n      )\n    },\n    uniPopup: function() {\n      return import(\n        /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./get-location.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./get-location.vue?vue&type=script&lang=js&\"","<template>\r\n    <view>\r\n        <page-head :title=\"title\"></page-head>\r\n        <view class=\"uni-padding-wrap\">\r\n            <view style=\"background:#FFFFFF; padding:40rpx;\">\r\n                <view class=\"uni-hello-text uni-center\">当前位置经纬度</view>\r\n                <block v-if=\"hasLocation === false\">\r\n                    <view class=\"uni-h2 uni-center uni-common-mt\">未获取</view>\r\n                </block>\r\n                <block v-if=\"hasLocation === true\">\r\n                    <view class=\"uni-h2 uni-center uni-common-mt\">\r\n                        <text>E: {{location.longitude[0]}}°{{location.longitude[1]}}′</text>\r\n                        <text>\\nN: {{location.latitude[0]}}°{{location.latitude[1]}}′</text>\r\n                    </view>\r\n                </block>\r\n            </view>\r\n            <view class=\"uni-btn-v\">\r\n                <button type=\"primary\" @tap=\"getLocation\">获取位置</button>\r\n                <button @tap=\"clear\">清空</button>\r\n            </view>\r\n        </view>\r\n        <uni-popup :show=\"type === 'showpopup'\" mode=\"fixed\" @hidePopup=\"togglePopup('')\">\r\n            <view class=\"popup-view\">\r\n                <text class=\"popup-title\">需要用户授权位置权限</text>\r\n                <view class=\"uni-flex popup-buttons\">\r\n                    <button class=\"uni-flex-item\" type=\"primary\" open-type=\"openSetting\" @tap=\"openSetting\">设置</button>\r\n                    <button class=\"uni-flex-item\" @tap=\"togglePopup('')\">取消</button>\r\n                </view>\r\n            </view>\r\n        </uni-popup>\r\n    </view>\r\n</template>\r\n<script>\r\n    import uniPopup from '@/components/uni-popup/uni-popup.vue'\r\n    var util = require('../../../common/util.js');\r\n    var formatLocation = util.formatLocation;\r\n    // #ifdef APP-PLUS\r\n    import permision from \"@/common/permission.js\"\r\n    // #endif\r\n\r\n    export default {\r\n        components: {\r\n            uniPopup\r\n        },\r\n        data() {\r\n            return {\r\n                title: 'getLocation',\r\n                hasLocation: false,\r\n                location: {},\r\n                type: ''\r\n            }\r\n        },\r\n        methods: {\r\n            togglePopup(type) {\r\n                this.type = type;\r\n            },\r\n            showConfirm() {\r\n                this.type = 'showpopup';\r\n            },\r\n            hideConfirm() {\r\n                this.type = '';\r\n            },\r\n            async getLocation() {\r\n                // #ifdef APP-PLUS\r\n                let status = await this.checkPermission();\r\n                if (status !== 1) {\r\n                    return;\r\n                }\r\n                // #endif\r\n                // #ifdef MP-WEIXIN || MP-TOUTIAO || MP-QQ\r\n                let status = await this.getSetting();\r\n                if (status === 2) {\r\n                    this.showConfirm();\r\n                    return;\r\n                }\r\n                // #endif\r\n\r\n                this.doGetLocation();\r\n            },\r\n            doGetLocation() {\r\n                uni.getLocation({\r\n                    success: (res) => {\r\n                        this.hasLocation = true;\r\n                        this.location = formatLocation(res.longitude, res.latitude);\r\n                    },\r\n                    fail: (err) => {\r\n                        // #ifdef MP-BAIDU\r\n                        if (err.errCode === 202 || err.errCode === 10003) { // 202模拟器 10003真机 user deny\r\n                            this.showConfirm();\r\n                        }\r\n                        // #endif\r\n                        // #ifndef MP-BAIDU\r\n                        if (err.errMsg.indexOf(\"auth deny\") >= 0) {\r\n                            uni.showToast({\r\n                                title: \"访问位置被拒绝\"\r\n                            })\r\n                        } else {\r\n                            uni.showToast({\r\n                                title: err.errMsg\r\n                            })\r\n                        }\r\n                        // #endif\r\n                    }\r\n                })\r\n            },\r\n            getSetting: function() {\r\n                return new Promise((resolve, reject) => {\r\n                    uni.getSetting({\r\n                        success: (res) => {\r\n                            if (res.authSetting['scope.userLocation'] === undefined) {\r\n                                resolve(0);\r\n                                return;\r\n                            }\r\n                            if (res.authSetting['scope.userLocation']) {\r\n                                resolve(1);\r\n                            } else {\r\n                                resolve(2);\r\n                            }\r\n                        }\r\n                    });\r\n                });\r\n            },\r\n            openSetting: function() {\r\n                this.hideConfirm();\r\n                uni.openSetting({\r\n                    success: (res) => {\r\n                        if (res.authSetting && res.authSetting['scope.userLocation']) {\r\n                            this.doGetLocation();\r\n                        }\r\n                    },\r\n                    fail: (err) => {}\r\n                })\r\n            },\r\n            async checkPermission() {\r\n                let status = permision.isIOS ? await permision.requestIOS('location') :\r\n                    await permision.requestAndroid('android.permission.ACCESS_FINE_LOCATION');\r\n\r\n                if (status === null || status === 1) {\r\n                    status = 1;\r\n                } else if (status === 2) {\r\n                    uni.showModal({\r\n                        content: \"系统定位已关闭\",\r\n                        confirmText: \"确定\",\r\n                        showCancel: false,\r\n                        success: function(res) {\r\n                        }\r\n                    })\r\n                } else if (status.code) {\r\n                    uni.showModal({\r\n                        content: status.message\r\n                    })\r\n                } else {\r\n                    uni.showModal({\r\n                        content: \"需要定位权限\",\r\n                        confirmText: \"设置\",\r\n                        success: function(res) {\r\n                            if (res.confirm) {\r\n                                permision.gotoAppSetting();\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n\r\n                return status;\r\n            },\r\n            clear: function() {\r\n                this.hasLocation = false\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .popup-view {\r\n        width: 500rpx;\r\n    }\r\n\r\n    .popup-title {\r\n        display: block;\r\n        font-size: 16px;\r\n        line-height: 3;\r\n        margin-bottom: 10px;\r\n        text-align: center;\r\n    }\r\n\r\n    .popup-buttons button {\r\n        margin-left: 4px;\r\n        margin-right: 4px;\r\n    }\r\n</style>\r\n","import mod from \"-!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./get-location.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/cxq办公/移动端开发/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./get-location.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}